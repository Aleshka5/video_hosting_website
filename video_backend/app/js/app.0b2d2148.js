(function(){var e={5226:function(e,t,s){"use strict";var i=s(9242);const o="",r={getUrl(e){return`${o}/${e}`},durationToString(e){const t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=e-3600*t-60*s,o=t<10?`0${t}`:`${t}`,r=s<10?`0${s}`:`${s}`,a=i<10?`0${i}`:`${i}`;return t>0?`${o}:${r}:${a}`:`${r}:${a}`},frameToSeconds(e,t){return Math.round(e/t)}};var a=r,l=s(3396);function n(e,t,s,i,o,r){const a=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(a)}var c=s(6520),d=s(65),p=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let u=class extends c.w3{mounted(){const e=(0,d.oR)();e.commit("initialiseStore")}};u=p([(0,c.Ei)({})],u);var h=u,g=s(89);const v=(0,g.Z)(h,[["render",n]]);var m=v,f=s(2483),y=s(7139);const w={class:"container-fluid pb-0"},b=(0,l.uE)('<div class="top-mobile-search"><div class="row"><div class="col-md-12"><form class="mobile-search"><div class="input-group"><input type="text" placeholder="Search for..." class="form-control"><div class="input-group-append"><button type="button" class="btn btn-dark"><i class="fas fa-search"></i></button></div></div></form></div></div></div>',1),_={class:"video-block section-padding"},k={class:"row"},P=(0,l._)("div",{class:"col-md-12"},[(0,l._)("div",{class:"main-title"},[(0,l._)("div",{class:"btn-group float-right right-action"}),(0,l._)("h6",null,"Видеоролики")])],-1),A={class:"video-card"},U={class:"video-card-image"},D=["href"],R=(0,l._)("i",{class:"fas fa-play-circle"},null,-1),E=[R],$=["href"],F=["src"],S={class:"time"},j={class:"video-card-body"},Z={class:"video-title"},M=["href"],T={class:"video-page text-success"},x=(0,l._)("a",{title:"","data-placement":"top","data-toggle":"tooltip",href:"#","data-original-title":"Verified"},[(0,l._)("i",{class:"fas fa-check-circle text-success"})],-1),O=(0,l._)("hr",{class:"mt-0"},null,-1);function q(e,t,s,i,o,r){return(0,l.wg)(),(0,l.iD)("div",w,[b,(0,l._)("div",_,[(0,l._)("div",k,[P,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.videos,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-xl-3 col-sm-6 mb-3",key:t.id},[(0,l._)("div",A,[(0,l._)("div",U,[(0,l._)("a",{class:"play-icon",href:`/video/${t.id}`},E,8,D),(0,l._)("a",{href:`/video/${t.id}`},[(0,l._)("img",{class:"img-fluid",src:e.$utils.getUrl(t.videoPreviewPath),alt:""},null,8,F)],8,$),(0,l._)("div",S,(0,y.zw)(e.$utils.durationToString(t.durationSeconds)),1)]),(0,l._)("div",j,[(0,l._)("div",Z,[(0,l._)("a",{href:`/video/${t.id}`},(0,y.zw)(t.videoName),9,M)]),(0,l._)("div",T,[(0,l.Uk)((0,y.zw)(t.videoCategory)+" ",1),x])])])])))),128))])]),O])}var V=s(7327);const z="";async function L(e){let t=await fetch(e);if(!t.ok)if(401===t.status){const s=e,i={method:s.method,body:s.body};if(t=await fetch(new Request(s.url,i)),!t.ok)throw new Error(t.statusText)}else if(400!==t.status){const e=await t.text();throw new Error(e)}let s=null;try{s=await t.json()}catch(i){throw new Error("Error parse json")}return s}async function C(e){const t={method:"get",headers:{"Content-Type":"application/json"}},s=await L(new Request(`${z}${e}`,t));return s}async function N(e,t){const s={method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},i=await L(new Request(`${z}${e}`,s));return i}async function Y(e,t){const s={method:"post",body:t,headers:{Accept:"application/json"}},i=await fetch(new Request(`${z}${e}`,s));if(!i.ok&&400!==i.status){const e=await i.text();throw new Error(e)}let o=null;try{o=await i.json()}catch(r){throw new Error("Error parse json")}return o}async function K(e){const t=await N("/api/register",e);return t}async function J(e){const t=await N("/api/login",e);return t}async function H(e){const t=await Y("/api/videos/upload",e);return t}async function W(e){const t=await Y("/api/simple/upload",e);return t}async function X(e){const t=await N("/api/process/start",e);return t}async function G(e){const t=await C(`/api/process/status/${e}`);return t}async function I(){const e=await C("/api/videos");return e}async function B(e){const t=await C(`/api/videos/${e}`);return t}async function Q(e){const t=await C(`/api/subtitles/${e}`);return t}var ee=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let te=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"videos",[])}async mounted(){this.videos=await I()}};te=ee([(0,c.Ei)({components:{}})],te);var se=te;const ie=(0,g.Z)(se,[["render",q]]);var oe=ie;const re={class:"container-fluid pb-0"},ae={class:"video-block section-padding"},le={class:"row"},ne={class:"col-md-8"},ce={class:"single-video-left"},de={key:0},pe={key:1,class:"single-video"},ue={class:"single-video-title box mb-3"},he={class:"single-video-info-content box mb-3"},ge=(0,l._)("h6",null,"Категория :",-1),ve=(0,l._)("h6",null,"Описание :",-1),me={class:"col-md-4"},fe={class:"single-video-right"},ye={key:0,class:"row"},we=(0,l._)("div",{class:"col-md-12"},[(0,l._)("h5",null,"Аннотации:")],-1),be={class:"video-card video-card-list"},_e={class:"video-card-body"},ke={class:"video-title"},Pe={class:"time-s"};function Ae(e,t,s,i,o,r){const a=(0,l.up)("VideoPlayer");return(0,l.wg)(),(0,l.iD)("div",re,[(0,l._)("div",ae,[(0,l._)("div",le,[(0,l._)("div",ne,[(0,l._)("div",ce,[e.videoOptions?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",de," Загрузка... ")),e.videoOptions?((0,l.wg)(),(0,l.iD)("div",pe,[(0,l.Wm)(a,{options:e.videoOptions,subtitles:e.subtitles,fps:e.fps},null,8,["options","subtitles","fps"])])):(0,l.kq)("",!0),(0,l._)("div",ue,[(0,l._)("h2",null,(0,y.zw)(e.video?.videoName),1)]),(0,l._)("div",he,[ge,(0,l._)("p",null,(0,y.zw)(e.video?.videoCategory),1),ve,(0,l._)("p",null,(0,y.zw)(e.video?.videoDescription),1)])])]),(0,l._)("div",me,[(0,l._)("div",fe,[e.video?((0,l.wg)(),(0,l.iD)("div",ye,[we,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.subtitles,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-md-12",key:t.id},[(0,l._)("div",be,[(0,l._)("div",_e,[(0,l._)("div",ke,[(0,l._)("span",Pe,(0,y.zw)(e.$utils.durationToString(e.$utils.frameToSeconds(t.startFrame,this.fps))),1),(0,l.Uk)(),(0,l._)("b",null,(0,y.zw)(t.textSubtitle),1)])])])])))),128))])):(0,l.kq)("",!0)])])])])])}const Ue={class:"channels-card-image-btn"},De={ref:"videoPlayer",class:"video-js",width:"1080"},Re={ref:"audioPlayerRef",id:"player"};function Ee(e,t,s,i,o,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Ue,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t[0]||(t[0]=(...t)=>e.onRecognitionStart&&e.onRecognitionStart(...t))},"Включить голосовое управление")]),(0,l._)("video",De,null,512),(0,l._)("audio",Re,null,512)])}var $e=s(8278),Fe=s(9519),Se=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let je=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"fps",void 0),(0,V.Z)(this,"options",void 0),(0,V.Z)(this,"subtitles",void 0),(0,V.Z)(this,"player",void 0),(0,V.Z)(this,"audioPlayerRef",void 0),(0,V.Z)(this,"timeDict",{}),(0,V.Z)(this,"audioDict",{}),(0,V.Z)(this,"timer",void 0),(0,V.Z)(this,"recognition",void 0),(0,V.Z)(this,"videoPlayer",void 0),(0,V.Z)(this,"audioPlayer",void 0)}mounted(){this.initSpeachRecognition();for(let e=0;e<this.subtitles.length;e++){const t=this.subtitles[e],s=a.frameToSeconds(t.startFrame,this.fps);if(this.timeDict[s]=e,t.voiceFilePath){const e=a.getUrl(t.voiceFilePath),s=new Audio(e);s.preload="auto",s.addEventListener("canplaythrough",this.loadedAudio,!1),this.audioDict[t.voiceFilePath]=s}}this.player=(0,Fe.Z)(this.videoPlayer,this.options,(()=>{this.player.log("onPlayerReady",this)})),this.player.on("loadedmetadata",this.onLoadedMetadata),this.player.on("timeupdate",this.onTimeUpdate)}initSpeachRecognition(){this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.lang="ru-RU",this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.onresult=this.onRecognitionEvent,this.recognition.onspeechend=this.onSpeechEnd,this.recognition.onnomatch=this.onNoMatch,this.recognition.onerror=this.onRecognitionError}onRecognitionStart(e){this.recognition.start()}onRecognitionEvent(e){const t=e.results[e.results.length-1][0].transcript.trim().toLowerCase();"старт"===t?this.player.play():"стоп"===t&&this.player.pause()}onSpeechEnd(){console.log("Speech end")}onNoMatch(e){console.log("I didn't recognise command")}onRecognitionError(e){console.log(`Error occurred in recognition: ${e.error}`)}loadedAudio(e){}onLoadedMetadata(){const e=this.player.duration(),t=this.player.controlBar.progressControl.children_[0].el_;console.log(t);for(let s=0;s<this.subtitles.length;s++){const i=a.frameToSeconds(this.subtitles[s].startFrame,this.fps),o=i/e*100+"%",r=i,l=document.createElement("div");l.className="vjs-marker",l.style.left=o;const n=document.createElement("span"),c=document.createTextNode(this.subtitles[s].textSubtitle);n.appendChild(c),l.appendChild(n),l.addEventListener("click",(()=>{this.player.currentTime(r)})),t.appendChild(l)}}onTimeUpdate(e){const t=Math.round(this.player.currentTime());if(t in this.timeDict&&null==this.timer){console.log(this.player.currentTime()),console.log(t);const e=this.player.volume();this.player.volume(.1);const s=this.timeDict[t],i=this.subtitles[s],o=a.frameToSeconds(i.endFrame-i.startFrame,this.fps);if(null!=i.voiceFilePath){const e=this.audioDict[i.voiceFilePath];e.play()}this.timer=setTimeout((()=>{this.timer=null,this.player.volume(e)}),1e3*o)}}beforeDestroy(){this.player&&this.player.dispose()}};Se([(0,$e.Rl)("videoPlayer")],je.prototype,"videoPlayer",void 0),Se([(0,$e.Rl)("audioPlayerRef")],je.prototype,"audioPlayer",void 0),je=Se([(0,c.Ei)({props:{fps:Number,subtitles:Array,options:Object}})],je);var Ze=je;const Me=(0,g.Z)(Ze,[["render",Ee]]);var Te=Me,xe=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let Oe=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"videoOptions",null),(0,V.Z)(this,"video",null),(0,V.Z)(this,"fps",0),(0,V.Z)(this,"subtitles",[])}compareSubtitles(e,t){return e.startFrame>=t.startFrame?1:-1}async mounted(){const e=this.$route.params.id,t=parseInt(e,10);this.video=await B(t),this.fps=this.video.fps,this.subtitles=await Q(t),this.subtitles=this.subtitles.sort(this.compareSubtitles),this.videoOptions={autoplay:!1,controls:!0,fluid:!0,poster:a.getUrl(this.video.videoPreviewPath),sources:[{src:a.getUrl(this.video.videoFilePath),type:"video/mp4"}]}}};Oe=xe([(0,c.Ei)({components:{VideoPlayer:Te}})],Oe);var qe=Oe;const Ve=(0,g.Z)(qe,[["render",Ae]]);var ze=Ve;const Le={class:"container-fluid upload-details"},Ce=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-lg-12"},[(0,l._)("div",{class:"main-title"},[(0,l._)("h6",null,"Загрузка видео")])])],-1),Ne={key:0,class:"row"},Ye=(0,l._)("div",{class:"col-lg-12"},[(0,l._)("div",{class:"main-title"},[(0,l._)("h6",null,"Детали загрузки")])],-1),Ke=(0,l._)("div",{class:"col-lg-2"},[(0,l._)("div",{class:"imgplace"})],-1),Je={class:"col-lg-10"},He={class:"osahan-progress"},We={class:"progress"},Xe=["aria-valuenow"],Ge=(0,l._)("div",{class:"osahan-close"},[(0,l._)("a",{href:"#"},[(0,l._)("i",{class:"fas fa-times-circle"})])],-1),Ie={class:"osahan-desc"},Be={key:1},Qe=(0,l._)("label",{class:"control-label"},"Простая загрузка файла",-1),et={key:2},tt={class:"row"},st={class:"col-sm-6"},it={class:"form-group"},ot=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Url сервера с GPU "),(0,l._)("span",{class:"required"},"*")],-1),rt={class:"row"},at={class:"col-sm-6"},lt={class:"form-group"},nt=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Файл для загрузки"),(0,l._)("span",{class:"required"},"*")],-1),ct={class:"box__file",ref:"uploadFile",type:"file",name:"uploadFile",id:"uploadFile"},dt={class:"row"},pt={class:"col-sm-6"},ut={class:"form-group"},ht=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Название "),(0,l._)("span",{class:"required"},"*")],-1),gt={class:"row"},vt={class:"col-sm-6"},mt={class:"form-group"},ft=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Описание "),(0,l._)("span",{class:"required"},"*")],-1),yt={class:"row"},wt={class:"col-sm-6"},bt={class:"form-group"},_t=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Категория "),(0,l._)("span",{class:"required"},"*")],-1),kt=(0,l._)("option",{value:""},"Выбрать категорию",-1),Pt=(0,l._)("option",{value:"Фильмы"},"Фильмы",-1),At=(0,l._)("option",{value:"Сериалы"},"Сериалы",-1),Ut=(0,l._)("option",{value:"Клипы"},"Клипы",-1),Dt=[kt,Pt,At,Ut],Rt={class:"row"},Et={class:"col-sm-12"},$t=["disabled"],Ft={key:3},St={class:"row"},jt={class:"col-sm-6"},Zt={class:"form-group"},Mt=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Url сервера с GPU "),(0,l._)("span",{class:"required"},"*")],-1),Tt={class:"row"},xt={class:"col-sm-6"},Ot={class:"form-group"},qt=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Файл для загрузки"),(0,l._)("span",{class:"required"},"*")],-1),Vt={class:"box__file",ref:"uploadFile",type:"file",name:"uploadFile",id:"uploadFile"},zt={class:"row"},Lt={class:"col-sm-6"},Ct={class:"form-group"},Nt=(0,l._)("label",{class:"control-label"},[(0,l.Uk)("Тип файла "),(0,l._)("span",{class:"required"},"*")],-1),Yt=(0,l._)("option",{value:"image"},"image",-1),Kt=(0,l._)("option",{value:"video"},"video",-1),Jt=(0,l._)("option",{value:"audio"},"audio",-1),Ht=[Yt,Kt,Jt],Wt={key:0,class:"row"},Xt={class:"col-sm-12"},Gt={class:"row"},It={class:"col-sm-12"};function Bt(e,t,s,o,r,a){return(0,l.wg)(),(0,l.iD)("div",Le,[Ce,e.progress>0?((0,l.wg)(),(0,l.iD)("div",Ne,[Ye,Ke,(0,l._)("div",Je,[(0,l._)("div",He,[(0,l._)("div",We,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100",style:(0,y.j5)({width:e.progress+"%"})},null,12,Xe)]),Ge]),(0,l._)("div",Ie,(0,y.zw)(e.uploadingMessage),1)])])):(0,l.kq)("",!0),e.progress>0?((0,l.wg)(),(0,l.iD)("hr",Be)):(0,l.kq)("",!0),Qe,(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.isSimpleUpload=t)},null,512),[[i.e8,e.isSimpleUpload]]),e.isSimpleUpload?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("form",et,[(0,l._)("div",tt,[(0,l._)("div",st,[(0,l._)("div",it,[ot,(0,l.wy)((0,l._)("input",{class:"form-control border-form-control",placeholder:"https://localhost:5000","onUpdate:modelValue":t[1]||(t[1]=t=>e.gpuServerUrl=t),type:"text"},null,512),[[i.nr,e.gpuServerUrl,void 0,{trim:!0}]])])])]),(0,l._)("div",rt,[(0,l._)("div",at,[(0,l._)("div",lt,[nt,(0,l._)("input",ct,null,512)])])]),(0,l._)("div",dt,[(0,l._)("div",pt,[(0,l._)("div",ut,[ht,(0,l.wy)((0,l._)("input",{class:"form-control border-form-control","onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.name.$model=t),placeholder:"Название...",type:"text"},null,512),[[i.nr,e.v$.name.$model,void 0,{trim:!0}]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.name.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128))])])]),(0,l._)("div",gt,[(0,l._)("div",vt,[(0,l._)("div",mt,[ft,(0,l.wy)((0,l._)("input",{class:"form-control border-form-control","onUpdate:modelValue":t[3]||(t[3]=t=>e.v$.description.$model=t),placeholder:"Описание...",type:"text"},null,512),[[i.nr,e.v$.description.$model,void 0,{trim:!0}]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.description.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128))])])]),(0,l._)("div",yt,[(0,l._)("div",wt,[(0,l._)("div",bt,[_t,(0,l.wy)((0,l._)("select",{class:"custom-select","onUpdate:modelValue":t[4]||(t[4]=t=>e.v$.category.$model=t)},Dt,512),[[i.bM,e.v$.category.$model,void 0,{trim:!0}]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.category.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128))])])]),(0,l._)("div",Rt,[(0,l._)("div",Et,[(0,l._)("button",{disabled:e.v$.$invalid,type:"button",class:"btn btn-success border-none",onClick:t[5]||(t[5]=(...t)=>e.onSave&&e.onSave(...t))},"Загрузить и обработать",8,$t)])])])),e.isSimpleUpload?((0,l.wg)(),(0,l.iD)("form",Ft,[(0,l._)("div",St,[(0,l._)("div",jt,[(0,l._)("div",Zt,[Mt,(0,l.wy)((0,l._)("input",{class:"form-control border-form-control",placeholder:"https://localhost:5000","onUpdate:modelValue":t[6]||(t[6]=t=>e.gpuServerUrl=t),type:"text"},null,512),[[i.nr,e.gpuServerUrl,void 0,{trim:!0}]])])])]),(0,l._)("div",Tt,[(0,l._)("div",xt,[(0,l._)("div",Ot,[qt,(0,l._)("input",Vt,null,512)])])]),(0,l._)("div",zt,[(0,l._)("div",Lt,[(0,l._)("div",Ct,[Nt,(0,l.wy)((0,l._)("select",{class:"custom-select","onUpdate:modelValue":t[7]||(t[7]=t=>e.fileType=t)},Ht,512),[[i.bM,e.fileType,void 0,{trim:!0}]])])])]),e.uploadedFileName?((0,l.wg)(),(0,l.iD)("div",Wt,[(0,l._)("div",Xt," Файл успешно загружен. Имя файла: "+(0,y.zw)(e.uploadedFileName),1)])):(0,l.kq)("",!0),(0,l._)("div",Gt,[(0,l._)("div",It,[(0,l._)("button",{type:"button",class:"btn btn-success border-none",onClick:t[8]||(t[8]=(...t)=>e.onSimpleUpload&&e.onSimpleUpload(...t))},"Загрузить")])])])):(0,l.kq)("",!0)])}var Qt=s(3053),es=s(9117),ts=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let ss=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"uploadingMessage",""),(0,V.Z)(this,"progress",0),(0,V.Z)(this,"v$",(0,Qt.ZP)()),(0,V.Z)(this,"gpuServerUrl","http://localhost:5000"),(0,V.Z)(this,"url","https://youtu.be/8TIdEezL7rc"),(0,V.Z)(this,"name",""),(0,V.Z)(this,"description",""),(0,V.Z)(this,"category",""),(0,V.Z)(this,"currentVideo",null),(0,V.Z)(this,"currentProcess",null),(0,V.Z)(this,"currentInterval",null),(0,V.Z)(this,"isSimpleUpload",!0),(0,V.Z)(this,"uploadedFileName",""),(0,V.Z)(this,"fileType","image"),(0,V.Z)(this,"uploadFile",void 0),(0,V.Z)(this,"errors",{"name.required":"Обязательное поле","description.required":"Обязательное поле","category.required":"Обязательное поле","name.minLength":"Минимальная длина 6 символов","description.minLength":"Минимальная длина 8 символов"})}getError(e){return this.errors[e]}async onSave(){await this.uploadVideoForm()}async onSimpleUpload(){await this.uploadSimpleFile()}async uploadSimpleFile(){const{files:e}=this.uploadFile;if(!e)return;const t=new FormData;t.append("file",e[0]),t.append("type",this.fileType);try{const e=await W(t);e&&(this.uploadedFileName=e)}catch(s){s&&(this.uploadingMessage="Ошибка попробуйте снова")}}async uploadVideoForm(){const{files:e}=this.uploadFile;if(!e)return;const t=new FormData;t.append("file",e[0]),t.append("name",this.name),t.append("description",this.description),t.append("category",this.category),this.uploadingMessage="Загрузка видео...",this.progress=10;try{const e=await H(t);e?(this.currentVideo=e,this.progress=20,this.uploadingMessage="Загрузка видео завершена",await this.processingVideoStart()):this.uploadingMessage="Ошибка попробуйте снова"}catch(s){s&&(this.uploadingMessage="Ошибка попробуйте снова")}}async downloadVideo(){this.uploadingMessage="Скачивание видео...",this.progress=10;this.url,this.name,this.description,this.category;try{const e=await B(5);e?(this.currentVideo=e,this.progress=20,this.uploadingMessage="Скачивание видео завершено",await this.processingVideoStart()):this.uploadingMessage="Ошибка попробуйте снова"}catch(e){e&&(this.uploadingMessage="Ошибка попробуйте снова")}}async processingVideoStart(){if(null==this.currentVideo)return;this.uploadingMessage="Запуск обработки...",this.progress=20;const e={id:0,videoId:this.currentVideo.id,status:0,dateStart:new Date,dateEnd:new Date,updatedAt:new Date,isSuccess:!1,errorMessage:""};try{const t=await X(e);t?(this.currentProcess=t,this.currentInterval=setInterval(this.getAndUpdateProcessStatus,5e3)):this.uploadingMessage="Ошибка попробуйте снова"}catch(t){t&&(this.uploadingMessage="Ошибка попробуйте снова")}}async getAndUpdateProcessStatus(){if(null!=this.currentProcess)try{const e=await G(this.currentProcess.id);if(e)switch(e.dateEnd&&null!=e.errorMessage&&(this.uploadingMessage=e.errorMessage,this.stopUpdate()),this.currentProcess=e,this.currentProcess.status){case 0:this.uploadingMessage="Начат процесс...";break;case 1:this.uploadingMessage="Идет процесс детектирования сцен...",this.progress=30;break;case 2:this.uploadingMessage="Идет процесс преобразования Image to text...",this.progress=40;break;case 3:this.uploadingMessage="Идет процесс суммаризации текстов...",this.progress=60;break;case 4:this.uploadingMessage="Идет процесс перевода...",this.progress=80;break;case 5:this.uploadingMessage="Идет процесс озвучивания...",this.progress=90;break;case 6:this.uploadingMessage="Процесс заверщен",this.progress=100,this.stopUpdate();break;default:this.uploadingMessage="Неизвестный статус"}else this.progress=0,this.uploadingMessage="Ошибка попробуйте снова",this.stopUpdate()}catch(e){e&&(this.uploadingMessage="Ошибка попробуйте снова",this.stopUpdate())}}stopUpdate(){this.currentInterval&&clearInterval(this.currentInterval)}};ts([(0,$e.Rl)("uploadFile")],ss.prototype,"uploadFile",void 0),ss=ts([(0,c.Ei)({components:{},validations:{name:{required:es.C1,minLength:(0,es.Ei)(8)},description:{required:es.C1,minLength:(0,es.Ei)(8)},category:{required:es.C1}}})],ss);var is=ss;const os=(0,g.Z)(is,[["render",Bt]]);var rs=os,as="data:image/png;base64,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";const ls={class:"login-main-wrapper"},ns={class:"container-fluid pl-0 pr-0"},cs={class:"row no-gutters"},ds={class:"col-md-5 p-5 bg-white full-height"},ps={class:"login-main-left"},us=(0,l._)("div",{class:"text-center mb-5 login-main-left-header pt-4"},[(0,l._)("img",{src:as,class:"img-fluid",alt:"LOGO"}),(0,l._)("h5",{class:"mt-3 mb-3"},"Вход")],-1),hs={class:"form-group"},gs=(0,l._)("label",{for:"login"},"Telegram логин",-1),vs={class:"form-group"},ms=(0,l._)("label",{for:"password"},"Пароль",-1),fs={class:"mt-4"},ys={class:"row"},ws={class:"col-12"},bs=["disabled"],_s=(0,l._)("div",{class:"text-center mt-5"},[(0,l._)("p",{class:"light-gray"},[(0,l.Uk)("Нет аккаунта? "),(0,l._)("a",{href:"/register"},"Регистрация")])],-1);function ks(e,t,s,o,r,a){return(0,l.wg)(),(0,l.iD)("section",ls,[(0,l._)("div",ns,[(0,l._)("div",cs,[(0,l._)("div",ds,[(0,l._)("div",ps,[us,(0,l._)("form",null,[(0,l._)("div",hs,[gs,(0,l.wy)((0,l._)("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.login.$model=t),type:"text",class:"form-control",placeholder:"telegram логин"},null,512),[[i.nr,e.v$.login.$model,void 0,{trim:!0}]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.login.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128))]),(0,l._)("div",vs,[ms,(0,l.wy)((0,l._)("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.password.$model=t),type:"password",class:"form-control",placeholder:"Пароль"},null,512),[[i.nr,e.v$.password.$model,void 0,{trim:!0}]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.password.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128))]),(0,l._)("div",fs,[(0,l._)("div",ys,[(0,l._)("div",ws,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.serverErrors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(t)),1)))),128)),(0,l._)("button",{disabled:e.v$.$invalid||e.isLoading,type:"button",class:"btn btn-outline-primary btn-block btn-lg",onClick:t[2]||(t[2]=(...t)=>e.signIn&&e.signIn(...t))},"Войти ",8,bs)])])])]),_s])])])])])}s(7658);var Ps=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let As=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"isLoading",!1),(0,V.Z)(this,"serverErrors",[]),(0,V.Z)(this,"login",""),(0,V.Z)(this,"password",""),(0,V.Z)(this,"v$",(0,Qt.ZP)()),(0,V.Z)(this,"store",(0,d.oR)()),(0,V.Z)(this,"errors",{"login.required":"Обязательное поле","password.required":"Обязательное поле","login.minLength":"Минимальная длина 3 символа","password.minLength":"Минимальная длина 8 символов","user not found":"Пользователь не найден","wrong password":"Неверный пароль"})}getError(e){return this.errors[e]}async signIn(){const e={login:this.login,password:this.password};try{this.isLoading=!0,this.serverErrors=[];const t=await J(e);t&&(console.log(t),this.store.commit("setUser",t),this.$router.push({name:"home"}))}catch(t){t&&this.serverErrors.push(t.message)}finally{this.isLoading=!1}}};As=Ps([(0,c.Ei)({components:{},validations:{login:{required:es.C1,minLength:(0,es.Ei)(3)},password:{required:es.C1,minLength:(0,es.Ei)(8)}}})],As);var Us=As;const Ds=(0,g.Z)(Us,[["render",ks]]);var Rs=Ds;const Es={class:"login-main-wrapper"},$s={class:"container-fluid pl-0 pr-0"},Fs={class:"row no-gutters"},Ss={class:"col-md-5 p-5 bg-white full-height"},js={class:"login-main-left"},Zs=(0,l._)("div",{class:"text-center mb-5 login-main-left-header pt-4"},[(0,l._)("img",{src:as,class:"img-fluid",alt:"LOGO"}),(0,l._)("h5",{class:"mt-3 mb-3"},"Регистрация")],-1),Ms={action:"#"},Ts={class:"form-group"},xs=(0,l._)("label",null,"Имя",-1),Os={class:"form-group"},qs=(0,l._)("label",null,"Telegram логин",-1),Vs={class:"form-group"},zs=(0,l._)("label",null,"Пароль",-1),Ls={class:"mt-4"},Cs=["disabled"],Ns=(0,l._)("div",{class:"text-center mt-5"},[(0,l._)("p",{class:"light-gray"},[(0,l.Uk)("Уже есть аккаунт? "),(0,l._)("a",{href:"/login"},"Вход")])],-1);function Ys(e,t,s,o,r,a){return(0,l.wg)(),(0,l.iD)("section",Es,[(0,l._)("div",$s,[(0,l._)("div",Fs,[(0,l._)("div",Ss,[(0,l._)("div",js,[Zs,(0,l._)("form",Ms,[(0,l._)("div",Ts,[xs,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.name.$model=t),class:"form-control",placeholder:"Имя"},null,512),[[i.nr,e.v$.name.$model,void 0,{trim:!0}]])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.name.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128)),(0,l._)("div",Os,[qs,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.login.$model=t),class:"form-control",placeholder:"Telegram логин"},null,512),[[i.nr,e.v$.login.$model,void 0,{trim:!0}]])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.login.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128)),(0,l._)("div",Vs,[zs,(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.password.$model=t),class:"form-control",placeholder:"Пароль"},null,512),[[i.nr,e.v$.password.$model,void 0,{trim:!0}]])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.v$.password.$errors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(`${t.$propertyPath}.${t.$validator}`)),1)))),128)),(0,l._)("div",Ls,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.serverErrors,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"error-field",key:t},(0,y.zw)(e.getError(t)),1)))),128)),(0,l._)("button",{disabled:e.v$.$invalid||e.isLoading,type:"button",class:"btn btn-outline-primary btn-block btn-lg",onClick:t[3]||(t[3]=(...t)=>e.signUp&&e.signUp(...t))},"Регистрация ",8,Cs)])]),Ns])])])])])}var Ks=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let Js=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"isLoading",!1),(0,V.Z)(this,"serverErrors",[]),(0,V.Z)(this,"name",""),(0,V.Z)(this,"login",""),(0,V.Z)(this,"password",""),(0,V.Z)(this,"v$",(0,Qt.ZP)()),(0,V.Z)(this,"store",(0,d.oR)()),(0,V.Z)(this,"errors",{"name.required":"Обязательное поле","login.required":"Обязательное поле","password.required":"Обязательное поле","name.minLength":"Минимальная длина 3 символа","login.minLength":"Минимальная длина 3 символа","password.minLength":"Минимальная длина 8 символов","user already exists":"Пользователь уже существуе"})}getError(e){return this.errors[e]}async signUp(){const e={name:this.name,login:this.login,password:this.password};try{this.isLoading=!0,this.serverErrors=[];const t=await K(e);t&&(this.store.commit("setUser",t),this.$router.push({name:"home"}))}catch(t){t&&this.serverErrors.push(t.message)}finally{this.isLoading=!1}}};Js=Ks([(0,c.Ei)({components:{},validations:{name:{required:es.C1,minLength:(0,es.Ei)(3)},login:{required:es.C1,minLength:(0,es.Ei)(3)},password:{required:es.C1,minLength:(0,es.Ei)(8)}}})],Js);var Hs=Js;const Ws=(0,g.Z)(Hs,[["render",Ys]]);var Xs=Ws,Gs=s.p+"img/logo5.6047f0d2.png",Is=s.p+"img/user.74d2eea3.png";const Bs={class:"navbar navbar-expand navbar-light bg-white static-top osahan-nav sticky-top"},Qs=(0,l._)("button",{class:"btn btn-link btn-sm text-secondary order-1 order-sm-0",id:"sidebarToggle"},[(0,l._)("i",{class:"fas fa-bars"})],-1),ei=(0,l.uE)('<a class="navbar-brand mr-1" href="/"><img class="img-fluid" alt="" src="'+Gs+'" style="height:40px;"></a><form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-5 my-2 my-md-0 osahan-navbar-search"><div class="input-group"><input type="text" class="form-control" placeholder="Поиск..."><div class="input-group-append"><button class="btn btn-light" type="button"><i class="fas fa-search"></i></button></div></div></form>',2),ti={class:"navbar-nav ml-auto ml-md-0 osahan-right-navbar"},si=(0,l._)("li",{class:"nav-item mx-1"},[(0,l._)("a",{class:"nav-link",href:"/upload"},[(0,l._)("i",{class:"fas fa-plus-circle fa-fw"}),(0,l.Uk)(" Загрузить видео ")])],-1),ii={class:"nav-item dropdown no-arrow osahan-right-navbar-user"},oi={class:"nav-link dropdown-toggle user-dropdown-link",href:"#",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ri=(0,l._)("img",{alt:"Avatar",src:Is},null,-1),ai={class:"nav-item osahan-right-navbar-user"},li=(0,l._)("i",{class:"fas fa-arrow-circle-right fa-fw"},null,-1),ni=[li],ci={id:"wrapper"},di=(0,l.uE)('<ul class="sidebar navbar-nav"><li class="nav-item active"><a class="nav-link" href="/"><i class="fas fa-fw fa-home"></i><span>Главная</span></a></li><li class="nav-item"><a class="nav-link" href="/video"><i class="fas fa-fw fa-video"></i><span>Видеоролики</span></a></li><li class="nav-item"><a class="nav-link" href="/upload"><i class="fas fa-fw fa-cloud-upload-alt"></i><span>Загрузить видео</span></a></li></ul>',1),pi={id:"content-wrapper"};function ui(e,t,s,i,o,r){const a=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("nav",Bs,[(0,l.Uk)("    "),Qs,(0,l.Uk)("    "),ei,(0,l._)("ul",ti,[si,(0,l._)("li",ii,[(0,l._)("a",oi,[ri,(0,l.Uk)(" "+(0,y.zw)(e.userName),1)])]),(0,l._)("li",ai,[(0,l._)("a",{class:"nav-link",href:"#",onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t))},ni)])])]),(0,l._)("div",ci,[di,(0,l._)("div",pi,[(0,l.Wm)(a)])])],64)}var hi=function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};let gi=class extends c.w3{constructor(...e){super(...e),(0,V.Z)(this,"userName",""),(0,V.Z)(this,"store",(0,d.oR)())}logout(){this.store.commit("clearUser"),this.$router.push("/login")}mounted(){this.store.state.userId||this.$router.push("/login"),this.userName=this.store.state.userName}};gi=hi([(0,c.Ei)({components:{}})],gi);var vi=gi;const mi=(0,g.Z)(vi,[["render",ui]]);var fi=mi;const yi=[{path:"/login",name:"login",component:Rs},{path:"/register",name:"register",component:Xs},{path:"",name:"main",component:fi,children:[{path:"",name:"home",component:oe},{path:"/video",name:"video",component:oe},{path:"/video/:id",name:"video_id",component:ze},{path:"/upload",name:"upload",component:rs}]}],wi=(0,f.p7)({history:(0,f.PO)("/"),routes:yi});var bi=wi;const _i=(0,d.MT)({state:{userId:0,userName:""},getters:{},mutations:{initialiseStore(e){const t=localStorage.getItem("store");t&&this.replaceState(Object.assign(e,JSON.parse(t)))},setUser(e,t){e.userId=t.id,e.userName=t.name},clearUser(e){e.userId=0,e.userName=""}},actions:{},modules:{}});_i.subscribe(((e,t)=>{localStorage.setItem("store",JSON.stringify(t))}));var ki=_i;const Pi=(0,i.ri)(m).use(ki).use(bi);Pi.config.globalProperties.$utils=a,Pi.mount("#app")},5893:function(){}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,r){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],r=e[d][2];for(var l=!0,n=0;n<i.length;n++)(!1&r||a>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[n])}))?i.splice(n--,1):(l=!1,r<a&&(a=r));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,a=i[0],l=i[1],n=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(n)var d=n(s)}for(t&&t(i);c<a.length;c++)r=a[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},i=self["webpackChunkvideo_bplayer"]=self["webpackChunkvideo_bplayer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5226)}));i=s.O(i)})();
//# sourceMappingURL=app.0b2d2148.js.map